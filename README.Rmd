---
output: github_document
runtime: shiny
---

<!-- README.md is generated from README.Rmd. Please edit that file -->

```{r setup, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>",
  fig.path = "man/figures/README-",
  out.width = "100%"
)
```
# rlocker

Used to add Learning Locker xAPI support to Shiny Applications.

## Installation

You can install the released version of rlocker from [GitHub](https://github.com/) with:

``` r
devtools::install_github("rpc5102/rlocker")
```

## Example
__app.R__
```{r app.R}
library(shiny)
library(rlocker)

shinyApp(
  server = function(input, output, session) {

    # Initialize Learning Locker connection -- substitute with your own locker credentials
    rlocker::connect(session, list(
      base_url = "https://learning-locker.stat.vmhost.psu.edu/",
      endpoint = "/data/xAPI/",
      auth = "Basic YWNjb3VudEBlbWFpbC5jb206c3VwZXJzZWNyZXRwYXNzd29yZA"
    ))

    # Register events for inputs
    
    # Method 1 - sendCustomMessage (uses js)
    observeEvent(input$submit, {
      session$sendCustomMessage(type = 'create-statement', rlocker::createStatement())
    })
    
    # Method 2 - createStatement and store (no js)
    observeEvent(input$button, {
      statement <- rlocker::createStatement()
      rlocker::store(statment)
    })
  }
)
```

## Configuration
|option|default|
|---|---|
|base_url|http://localhost:8000/xapi/|
|endpoint|/data/xAPI/|
|auth|Basic YWNjb3VudEBlbWFpbC5jb206c3VwZXJzZWNyZXRwYXNzd29yZA|
|username|null|
|password|null|

**Note**: *base_url* should be the hosting location for your locker's API *without* any endpoint or home.
